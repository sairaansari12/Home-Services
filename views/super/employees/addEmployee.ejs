<!-- AUI Framework -->
<!DOCTYPE html>
    <html>
   <%-include ('../partials/header')%>
    <body style="overflow: hidden;">
        

       

        <div id="page-wrapper" class="demo-example">

           

            <!-- #page-header -->

            <%-include ('../partials/side_bar')%>
            <!-- #page-sidebar -->
            <div id="page-content-wrapper">
                <div id="page-title">


    <div class="bg-gray text-transform-upr font-size-15 font-bold primary-font pad10A">Add Employee</div>

    

                </div>
                   <!-- #page-title -->
<div id="page-content">


<%-include ('../partials/flashMessage')%>



    <div class="large-box col-md-8">
        <div class="pad10A">
            

                <!-- <form id="demo-form" action=""  method="" /> -->
                <form  role="form" onsubmit="return false"  class="col-md-12"  id="adduser" >


                    <div class="form-row">

                        <div class="form-label col-md-4 mrg25T">
                            <label for="">
                                Upload profile Image:
                                <span class="required">*</span>
                            </label>
                        </div>
                       

                        <div class="form-input col-md-6 image-upload" >
                            
                            <label for="image">
                                 <img  height="80"  id="previewImage"  style="border-radius: 20% ;  display:block;margin-left: auto;
                                margin-right: auto;" width="80" src="<%-config.IMAGE_APPEND_URL%>/assets/images/upload.png" >
            
                            </label>
                            <input id="image" style="display:none" type="file"  name="image" />
                          </div>
            
            
                    </div>






                <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                First Name:
                                <span class="required">*</span>
                            </label>
                        </div>
                        <div class="form-input col-md-8">
                            <input type="text" id="firstName" name="firstName"  data-trigger="change" data-required="true" class="parsley-validated" />
                        </div>
                    </div>


                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                Last Name:
                            
                            </label>
                        </div>
                        <div class="form-input col-md-8">
                            <input type="text" id="lastName" name="lastName"  data-trigger="change"  class="parsley-validated" />
                        </div>
                    </div>


                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                Email:
                                <span class="required">*</span>
                            </label>
                        </div>
                        <div class="form-input col-md-8">
                            <input type="text" id="email" name="email" data-type="email" data-trigger="change" data-required="true" class="parsley-validated" />
                        </div>
                    </div>



                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                Phone Number:<span class="required">*</span>
                            </label>
                        </div>
                        <div class="form-input col-md-3">
                            <input type="text" id="countryCode" name="countryCode"   placeholder="91" data-trigger="change"    data-required="true"  class="parsley-validated" />
                        </div>
                        <div class="form-input col-md-5">

                            <input type="text" id="phoneNumber" name="phoneNumber"  data-trigger="change" data-type="phone" data-required="true"  class="parsley-validated" />
                       
                        </div>
                    </div>


                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                DOB:
                                <span class="required">*</span>
                            </label>
                        </div>
                        <div class="form-input col-md-8">
                            <input type="text" id="dob" name="dob" autocomplete="off"  data-trigger="change" data-required="true" class="datepicker" />
                        </div>
                    </div>



                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                Role:  <span class="required">*</span>
                            </label>
                        </div>
                        <div class="form-input col-md-8">
                          
                            <select data-placeholder="Choose Type" data-required="true"  data-required="true" name="role" class="chosen-select" id="role">
                                <option value="0" >Nothing Selected </option> 
                                <%for(var p=0;p<role.length;p++){%>
                                   
                                    <option   value="<%-role[p].id%>" ><%-role[p].userType%></option> 
  
                                   
                                   <%}%>
                

                       </select>  
                          
                        </div>
                    </div>

<!-- 
                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                Assigned Services:
                            </label>
                        </div>
        
                        <div class="form-input  form-vertical dropdown  col-md-3">
                           
                            <select data-placeholder="Choose Service"  name="service" id="service" onchange="getSubService()"  data-required="true" class="chosen-select" >
                                <option value="" /> 
                                <% for(var k=0;k<services.length;k++){ %>
                                <option value="<%-services[k].id%>"> <%-services[k].name%> </option>
                              <%}%>
                
                       </select>
                    
                         </div>
                        <div class="form-checkbox-radio col-md-5" id="subservice">
                          
                        </div>
                    </div>
         -->





                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="" class="label-description">
                                Address:
                                <span>10 chars min, 200 max</span>
                            </label>
                        </div>
                        <div class="form-input col-md-8">
                            <textarea id="address" name="address" data-trigger="keyup" data-rangelength="[10,200]" class="parsley-validated"></textarea>
                        </div>
                    </div>


                    <div class="form-row">

                        <div class="form-label col-md-4">
                            <label for="">
                                Cover Image:
                            </label>
                        </div>
                       

                        <div class="form-input col-md-8" >
                        
                            <input id="coverImage" type="file"  name="coverImage" />
                          </div>
            
            
                    </div>



                    <div class="form-row">
                        <div class="form-label col-md-4">
                            <label for="">
                                Id Proof Type:
                            
                            </label>
                        </div>
                        <div class="form-input col-md-8">
                            <input type="text" id="idProofName" name="idProofName"  data-trigger="change"  class="parsley-validated" />
                        </div>
                    </div>



                    <div class="form-row">

                        <div class="form-label col-md-4">
                            <label for="">
                                Upload Id Proof:
                            </label>
                        </div>
                       

                        <div class="form-input col-md-8" >
                        
                            <input id="idProof" type="file"  name="idProof" />
                          </div>
            
            
                    </div>
                    <div class="divider"></div>
                    <div class="form-row">
                        <input type="hidden" name="superhidden" id="superhidden" />
                        <div class="form-input col-md-8 col-md-offset-6">
                            <!-- //onclick="javascript:$(&apos;#demo-form&apos;).parsley( &apos;validate&apos; );" -->
                            <!-- onclick="javascript:$('#adduser').parsley('validate' );"  -->
                            <button  type="button" onclick="window.history.back();"   class="btn ui-state-default medium bg-red mrg15R">
                                <span class="button-content">Cancel</span>
                            </button>
                            <button  type="submit" class="btn ui-state-default medium  primary-bg">
                                <span class="button-content">Submit</span>
                            </button>
                            </div>
                    </div>

                </form>

        </div>

       
    </div>



                	</div><!-- #page-content -->
            </div><!-- #page-main -->
        </div><!-- #page-wrapper -->

    </body>
</html>


<script type="text/javascript">

$( "#dob" ).datepicker({ maxDate: 1});
$('#adduser').submit( function() {

var tempform = $('#adduser');

tempform .parsley('validate' );

if(tempform.parsley('isValid' ))
{
var form_data = new FormData(tempform[0]);
$('#loading1').show()
$.ajax({
    type: 'POST',
    url: '<%-superadminpath%>employees/add',
    dataType: 'json',
    data: form_data,
    contentType:false,
    cache:false,
    processData:false,
    success: function (response) {
        $('#loading1').hide()
        if (response.code == 200) {
      
            showToastSuccess(response.message)

             window.location.href="<%-superadminpath%>employees";
           
        } else {
            showToastError(response.message)
        }
    },

    error: function(response)
    {
        $('#loading1').hide()
       var errorResponse=JSON.parse(response.responseText)
       showToastError(errorResponse.message)


    }
});
}
});



function getSubService()
      {

        var category=$('#service').val();

       
        $.ajax({
                type: 'POST',
                url: '<%-superadminpath%>employees/subservice',
                dataType: 'json',
                data:  JSON.stringify({'category':category}),
                contentType:'application/json',
                cache:false,
                processData:false,
                success: function (response) {
                    $(".overlay").hide();
                    $('#subservice').html('')

                    if (response.code == 200) {
                  var data=response.body;
                //  console.log(response)
                  var subservices="";

                 
                        for(var k=0; k<data.length;k++)
                        {
                   
                        subservices=subservices+ '<input type="checkbox"  value="'+data[k].id+'" class="custom-checkbox" name="subcat" id="" />';

                    
                   
                    subservices=subservices+ '<label for="">'+data[k].name+'</label>';


                        }
                 $('#subservice').html(subservices)
                       
                    } else {
                       // showToastError(response.message)
                    }
                },

                error: function(response)
                {
                   var errorResponse=JSON.parse(response.responseText)
                   //showToastError(errorResponse.message)


                }
            });


        }
     





    </script>



<script type="text/javascript">
  
     $("#countryCode").intlTelInput({ initialCountry:"in",
   });
  var input = document.querySelector("#countryCode");
  input.addEventListener("countrychange",function() {
  $("#countryCode").val($("#countryCode").intlTelInput("getSelectedCountryData").dialCode);
   
  });
  
      
      </script>
